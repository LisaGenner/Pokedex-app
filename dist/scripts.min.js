let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t?e.push(t):console.log("Pokemon data entered incorrectly. Please try again.")}function n(){return e}let i=document.querySelector(".search-bar");i.addEventListener("input",t=>{let n=t.target.value.toLowerCase(),i=e.filter(e=>e.name.toLowerCase().includes(n));document.querySelector(".pokemon-list").innerHTML="",i.forEach(e=>{r(e)})});let o=document.getElementById("type-filter");function r(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li"),i=document.createElement("button");a(e).then(function(){n.classList.add("list-group-item"),i.innerHTML+="<h1>"+e.id+". "+e.name+"</h1>",i.innerHTML+='<img src="'+e.imageUrl+'" alt="'+e.name+"'s image and button\" >",i.classList.add("pokeList--item","btn","btn-warning"),i.setAttribute("data-bs-toggle","modal"),i.setAttribute("data-bs-target","#pokeModal"),i.classList.add(e.types[0])}),n.appendChild(i),t.appendChild(n),i.addEventListener("click",function(t){l(e)})}function a(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.modalImageUrl=t.sprites.other.dream_world.front_default,e.id=t.id,e.height=t.height/10,e.weight=t.weight/10,e.types=[];for(let n=0;n<t.types.length;n++)e.types[n]=t.types[n].type.name;e.abilities=[];for(let i=0;i<t.abilities.length;i++)e.abilities[i]=t.abilities[i].ability.name;e.hp=t.stats[1].base_stat,e.attack=t.stats[2].base_stat,e.defense=t.stats[3].base_stat}).catch(function(e){s(),console.error(e)})}function l(t){a(t).then(()=>{!function t(n){document.querySelector(".modal-body");let i=document.querySelector(".modal-title");document.querySelector(".modal-header"),document.querySelector(".modal-footer"),bootstrap.Modal.getInstance(document.querySelector(".modal")),i.innerText=n.id+". "+n.name+"\n";document.getElementById("modalImage").setAttribute("src",n.modalImageUrl);document.querySelector(".height-el").innerText="Height: "+n.height+"m";document.querySelector(".weight-el").innerText="Weight: "+n.weight+"kg";let o=document.querySelector(".type-el");o.innerText="Types: "+n.types[0],n.types.length>1&&(o.innerText+=", "+n.types[1]);let r=document.querySelector(".ability-el");r.innerText="Abilities: "+n.abilities[0],n.abilities.length>1&&(r.innerText+=", "+n.abilities[1]);document.querySelector(".previous-button").addEventListener("click",l);document.querySelector(".next-button").addEventListener("click",a);document.querySelector(".hp-stat").innerText=n.hp;document.querySelector(".attack-stat").innerText=n.attack;function a(){t(e[n.id])}function l(){t(e[n.id-2])}document.querySelector(".defense-stat").innerText=n.defense,window.addEventListener("keydown",e=>{"ArrowRight"===e.key&&a()}),window.addEventListener("keydown",e=>{"ArrowLeft"===e.key&&l()});document.querySelector(".btn-close").addEventListener("click",e=>{document.getElementById("pokeModal").classList.add("hidden")})}(t)})}function s(){document.querySelector(".pokedex").classList.remove("hidden"),document.querySelector(".loader").classList.add("hidden")}return o.addEventListener("change",function(){let t=o.value;o.classList.contains(t)||(o.className="",o.classList.add(t));let n=e.filter(function(e){return e.types.includes(t)});document.querySelector(".pokemon-list").innerHTML="",n.map(function(e){return r(e)}).join(""),"all"===t&&e.forEach(function(e){r(e)})}),{add:t,getAll:n,addListItem:r,showDetails:l,loadList:function e(){return document.querySelector(".pokedex").classList.add("hidden"),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:a,hideLoadingMessage:s,preloadImages:function e(t){new Image().src=t.modalImageUrl}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}).then(function(){pokemonRepository.hideLoadingMessage()}).catch(function(e){pokemonRepository.hideLoadingMessage(),console.error(e)});